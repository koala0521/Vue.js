{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/redRain/index.js"],"names":[],"mappings":"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","file":"redRain.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\r\n\r\nfunction RedRain(){\r\n    this.ajaxing = false;\r\n    this.waitTime = 3;\r\n    this.addTimer = null;\r\n    this.resData = null;\r\n    this.limitTimes = null;\r\n    this.netTypeArray = [\"undefined\", \"ethernet\", \"wifi\", \"edge\", \"2g\", \"3g\",\"4g\"];\r\n    this.init();\r\n}\r\n\r\nRedRain.prototype = {\r\n    constructor : RedRain,\r\n    init : function(){\r\n        this.setDefault(); //进入重置效果\r\n        this.bindEvent();\r\n    },\r\n    bindEvent : function(){\r\n        var _this = this;\r\n        var $body = $('body');\r\n\r\n        //开始抽奖\r\n        $body.on('touchstart','#start',function(){\r\n            _this.setWaitTime();\r\n        });\r\n\r\n        //抽中红包\r\n        $body.on('touchstart','.couten li',function(){\r\n            if(_this.ajaxing) return;\r\n            _this.getPrize();\r\n        });\r\n\r\n        //关闭弹窗\r\n        $body.on('touchstart','.close,.close-btn',function(){\r\n            _this.hidePrize();\r\n            _this.resetRain();\r\n        });\r\n\r\n    },\r\n    setWaitTime:function(){     /*设置等待时间3秒*/\r\n        var _this = this;\r\n        this.waitTime = 3;\r\n        var $start = $('#start,.startlv');\r\n        var $wait = $('.backward');\r\n        var $count = $('.count');\r\n\r\n        $start.hide();\r\n        $count.hide();\r\n        $wait.show();\r\n        $wait.find('span').text(this.waitTime);\r\n        $('#contaner').empty();\r\n        this.resData = {};\r\n\r\n        var timer = null;\r\n        timer = setInterval(function(){\r\n            _this.waitTime--;\r\n            if(_this.waitTime>0){\r\n                $wait.find('span').text(_this.waitTime);\r\n            }else{\r\n                clearInterval(timer);\r\n\r\n                $wait.hide();\r\n                _this.startRain();\r\n            }\r\n        },1000);\r\n    },\r\n    startRain:function(){       /*开始红包雨动画*/\r\n        var _this = this;\r\n        var $guang = $('.guang');\r\n        var $couten = $(\".couten\");\r\n        var $liItem = $couten.find('li');\r\n        var win = (parseInt($couten.css(\"width\"))) - 60;\r\n        var num = 0;\r\n\r\n        $guang.show();\r\n        $couten.css(\"height\", $(document).height());\r\n        $liItem.css({});\r\n\r\n        var add = function() {\r\n            var hb = parseInt(Math.random() * (3 - 1) + 1);\r\n            var Wh = parseInt(Math.random() * (50 - 30) + 30);\r\n            var Left = parseInt(Math.random() * win);\r\n            var rot = (parseInt(Math.random() * (45 - (-45)) - 45)) + \"deg\";\r\n            num++;\r\n            $couten.append(\"<li class='li\" + num + \"' ><a href='javascript:;'><img src='./dist/img/redRain/moneyhb_\" + hb + \".png'></a></li>\");\r\n\r\n            var $liNum = $(\".li\" + num);\r\n            $liNum.css({\r\n                \"left\": Left\r\n            });\r\n            $(\".li\" + num + \" a img\").css({\r\n                \"width\": Wh,\r\n                \"transform\": \"rotate(\" + rot + \")\",\r\n                \"-ms-transform\": \"rotate(\" + rot + \")\", /* Internet Explorer */\r\n                \"-moz-transform\": \"rotate(\" + rot + \")\", /* Firefox */\r\n                \"-webkit-transform\": \"rotate(\" + rot + \")\",/* Safari 和 Chrome */\r\n                \"-o-transform\": \"rotate(\" + rot + \")\" /* Opera */\r\n            });\r\n            $liNum.animate({'top':$(window).height()+20},5000,function(){\r\n                //删掉已经显示的红包\r\n                this.remove()\r\n            });\r\n\r\n            _this.addTimer = setTimeout(add,200)\r\n        };\r\n\r\n        setTimeout(add,300);\r\n    },\r\n    setDefault:function(){\r\n        this.setCache();\r\n        this.getTimes();    \r\n    },\r\n    setCache:function(){    /*设置缓存*/\r\n        for (var key in CFG){\r\n            if (CFG[key] == '' && this.getUrlItem(key) != null) {\r\n                CFG[key] = this.getUrlItem(key);\r\n                store.set(key,CFG[key]);\r\n            }\r\n        }\r\n    },\r\n    setClickAnalysis:function(){\r\n        let _this = this;\r\n        if(!window._hmt){\r\n            setTimeout(function(){\r\n                _this.setClickAnalysis();\r\n            },500)\r\n        }else{\r\n            window._hmt.push(['_trackEvent', '红包雨','抽奖', 't3']);\r\n        }\r\n    },\r\n    setLimitAnalysis:function(){\r\n        let _this = this;\r\n        if(!window._hmt){\r\n            setTimeout(function(){\r\n                _this.setLimitAnalysis();\r\n            },500)\r\n        }else{\r\n            window._hmt.push(['_trackEvent', '红包雨-次数已用完','抽奖', 't3']);\r\n        }\r\n    },\r\n    getNetwork:function(){      /*获取网络环境*/\r\n        var t = null,\r\n            netType = 0\r\n            , e = window.navigator.userAgent\r\n            , n = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\r\n\r\n        if (/MicroMessenger/.test(e))\r\n            if (/NetType/.test(e)) {\r\n                var i = e.match(/NetType\\/(\\S*)/);\r\n                t = i[1];\r\n            } else\r\n                document.addEventListener(\"WeixinJSBridgeReady\", function() {\r\n                    WeixinJSBridge.invoke(\"getNetworkType\", {}, function(e) {\r\n                        t = e.err_msg\r\n                    });\r\n                });\r\n        else if (n) {\r\n            var o = n.type;\r\n            t = o;\r\n        }\r\n        var r = this.netTypeArray;\r\n        if (typeof(t) != 'string') t = 'undefined';\r\n        t = t.toLowerCase();\r\n        for (var k=0;k<r.length;k++){\r\n            if(t.indexOf(r[k]) > -1) {\r\n                netType = k;\r\n                break;\r\n            }\r\n        }\r\n        return netType;\r\n    },\r\n    collReqData:function(){\r\n        var reqData = {\r\n            template_id: window.CFG['template_id'],\r\n            device_id:  store.get('device_id') || this.getUrlItem('device_id'),\r\n            app_id: store.get('app_id') ||this.getUrlItem('app_id'),\r\n            adslot_id: store.get('adslot_id') ||this.getUrlItem('adslot_id'),\r\n            connect_type: this.getNetwork(),\r\n            width:  $(window).width(),\r\n            height: $(window).height(),\r\n            timestamp: +new Date(),\r\n        };\r\n        return reqData;\r\n    },\r\n    getTimes:function(){    /*获取抽奖次数*/\r\n        var _this = this;\r\n        var deviceId = store.get('device_id') || this.getUrlItem('device_id');\r\n\r\n        if (deviceId != 'null') {\r\n            var timesData = {\r\n                template_id: window.CFG['template_id'],\r\n                app_id: store.get('app_id') ||this.getUrlItem('app_id'),\r\n                adslot_id: store.get('adslot_id') ||this.getUrlItem('adslot_id'),\r\n                device_id: deviceId,\r\n                timestamp: +new Date(),\r\n            };\r\n            $.ajax({\r\n                url: '/url/init',\r\n                type: \"post\",\r\n                contentType: \"application/json;\",\r\n                data: JSON.stringify(timesData),\r\n                success: function (result) {\r\n                    if (result.limitTimes >= 0) {\r\n                        _this.limitTimes = result.limitTimes;\r\n                        $('#countZa').text(_this.limitTimes);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    },\r\n    getUrlItem:function(name){\r\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n        var r = window.location.search.substr(1).match(reg);\r\n        if (r != null) return unescape(r[2]); return null;\r\n    },\r\n    getPrize:function(){    /*抽中红包，获取奖项*/\r\n        var _this = this;\r\n        this.stopRain();\r\n\r\n        if(this.limitTimes<=0){\r\n            _this.setLimitAnalysis();\r\n            return this.showLimited();\r\n        }\r\n\r\n        this.ajaxing = true;\r\n        _this.setClickAnalysis();\r\n\r\n        var ajaxTimeoutTest = $.ajax({\r\n            url: '/url/advert',\r\n            type: \"post\",\r\n            contentType: \"application/json;\",\r\n            data: JSON.stringify(_this.collReqData()),\r\n            timeout: 30000,\r\n            complete : function(XMLHttpRequest,status){ //请求完成后最终执行参数\r\n                if(status=='timeout'){//超时,status还有success,error等值的情况\r\n                    ajaxTimeoutTest.abort();\r\n                    _this.getPrizeFail();\r\n                }\r\n            },\r\n            success: function (result) {\r\n                _this.resData = result;\r\n                _this.limitTimes = result.limitTimes;\r\n\r\n                if(result && result.error_code == 0){\r\n                    _this.showPrize();\r\n                } else {\r\n                    _this.getPrizeFail();\r\n                }\r\n                _this.ajaxing = false;\r\n            },\r\n            error: function(err){\r\n                _this.getPrizeFail();\r\n                _this.ajaxing = false;\r\n                if(err&&err.limitTimes){\r\n                    _this.limitTimes = err.limitTimes\r\n                }\r\n            }\r\n        });\r\n    },\r\n    getPrizeFail:function(){\r\n        if (this.resData['error_code'] && this.resData['limitTimes'] >= 0 ){\r\n            this.limitTimes = this.resData['limitTimes'];\r\n        }\r\n        this.showNoResult();\r\n    },\r\n    showPrize:function(){   /*展示奖项弹窗*/\r\n        var _this = this;\r\n        var $popPosition = $('.pop-position ');\r\n\r\n        var $countZa = $('#countZa');\r\n        this.limitTimes = this.resData.limitTimes;\r\n        $countZa.text(this.limitTimes||0);\r\n\r\n\r\n        //请求成功，发送检波\r\n        if (_this.resData['adms']) {\r\n            var adMsg = _this.resData['adms'][0];\r\n\r\n            $popPosition.find('.prizes-img').attr('src',adMsg.imgurls);\r\n            $popPosition.find('.prizes-name').text(adMsg.title);\r\n\r\n            _this.showLog(adMsg['imptrackers']);\r\n\r\n\r\n            $('.prizes-zoom-box')\r\n                .unbind( \"click\" )\r\n                .on('click',function () {\r\n                    _this.clickLog(adMsg['clktrackers']);\r\n\r\n                    setTimeout(function () {\r\n                        window.location.href = adMsg['clkurl']; //跳转页面\r\n                    },600);\r\n                });\r\n        }\r\n        $popPosition.find('.prizes-no-cont').hide();\r\n        $popPosition.find('.prizes-cont-box').show();\r\n        $popPosition.fadeIn();\r\n\r\n    },\r\n    stopRain:function(){    /*停止红包雨动画*/\r\n        var $couten = $(\".couten\");\r\n        var $liItem = $couten.find('li');\r\n        $liItem.css({\r\n            opacity:0\r\n        });\r\n\r\n        clearTimeout(this.addTimer);\r\n    },\r\n    showNoResult:function(){    /*获奖弹窗-失败弹窗*/\r\n        var $popPosition = $('.pop-position ');\r\n        $popPosition.find('.prizes-no-cont').show();\r\n        $popPosition.find('.prizes-cont-box').hide();\r\n        $('.prizes-no-cont .prizes-no-img').attr('src','./dist/img/redRain/prizes-pop-fail.png');\r\n        $popPosition.show();\r\n    },\r\n    showLimited:function(){\r\n        var $popPosition = $('.pop-position ');\r\n        $popPosition.find('.prizes-no-cont').show();\r\n        $popPosition.find('.prizes-cont-box').hide();\r\n        $('.prizes-no-cont .prizes-no-img').attr('src','./dist/img/redRain/prizes-pop-no.png');\r\n        $popPosition.show();\r\n    },\r\n    hidePrize:function(){\r\n        var $popPosition = $('.pop-position ');\r\n        $popPosition.hide();\r\n    },\r\n    resetRain:function(){       /*重置抽奖初始化页面*/\r\n        var $guang = $('.guang');\r\n        var $start = $(\"#start,.startlv\");\r\n        var $backward = $('.backward');\r\n        var $count = $('.count');\r\n        $('#countZa').text(this.limitTimes);\r\n\r\n        $guang.hide();\r\n        $start.show();\r\n        $backward.hide();\r\n        $count.show();\r\n    },\r\n    showLog:function(urlArray){\r\n        if (urlArray.length < 1 ) return;\r\n        for(var i=0;i<urlArray.length;i++){\r\n            $('#contaner').append('<img class=\"imptrace\" src=\"'+ urlArray[i] +'\" />');\r\n        }\r\n    },\r\n    clickLog:function(urlArray){\r\n        if (urlArray.length < 1 ) return;\r\n        for(var j=0;j<urlArray.length;j++){\r\n            $('#contaner').append('<img class=\"clicktrace\" src=\"'+ urlArray[j] +'\" />');\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = new RedRain();"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvcmVkUmFpbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDRUEsU0FBUyxPQUFULEdBQWtCO0FBQ2QsU0FBSyxPQUFMLEdBQWUsS0FBZjtBQUNBLFNBQUssUUFBTCxHQUFnQixDQUFoQjtBQUNBLFNBQUssUUFBTCxHQUFnQixJQUFoQjtBQUNBLFNBQUssT0FBTCxHQUFlLElBQWY7QUFDQSxTQUFLLFVBQUwsR0FBa0IsSUFBbEI7QUFDQSxTQUFLLFlBQUwsR0FBb0IsQ0FBQyxXQUFELEVBQWMsVUFBZCxFQUEwQixNQUExQixFQUFrQyxNQUFsQyxFQUEwQyxJQUExQyxFQUFnRCxJQUFoRCxFQUFxRCxJQUFyRCxDQUFwQjtBQUNBLFNBQUssSUFBTDtBQUNIOztBQUVELFFBQVEsU0FBUixHQUFvQjtBQUNoQixpQkFBYyxPQURFO0FBRWhCLFVBQU8sZ0JBQVU7QUFDYixhQUFLLFVBQUwsR0FEYSxDQUNNO0FBQ25CLGFBQUssU0FBTDtBQUNILEtBTGU7QUFNaEIsZUFBWSxxQkFBVTtBQUNsQixZQUFJLFFBQVEsSUFBWjtBQUNBLFlBQUksUUFBUSxFQUFFLE1BQUYsQ0FBWjs7QUFFQTtBQUNBLGNBQU0sRUFBTixDQUFTLFlBQVQsRUFBc0IsUUFBdEIsRUFBK0IsWUFBVTtBQUNyQyxrQkFBTSxXQUFOO0FBQ0gsU0FGRDs7QUFJQTtBQUNBLGNBQU0sRUFBTixDQUFTLFlBQVQsRUFBc0IsWUFBdEIsRUFBbUMsWUFBVTtBQUN6QyxnQkFBRyxNQUFNLE9BQVQsRUFBa0I7QUFDbEIsa0JBQU0sUUFBTjtBQUNILFNBSEQ7O0FBS0E7QUFDQSxjQUFNLEVBQU4sQ0FBUyxZQUFULEVBQXNCLG1CQUF0QixFQUEwQyxZQUFVO0FBQ2hELGtCQUFNLFNBQU47QUFDQSxrQkFBTSxTQUFOO0FBQ0gsU0FIRDtBQUtILEtBM0JlO0FBNEJoQixpQkFBWSx1QkFBVTtBQUFNO0FB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dXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXHJcblxyXG5mdW5jdGlvbiBSZWRSYWluKCl7XHJcbiAgICB0aGlzLmFqYXhpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMud2FpdFRpbWUgPSAzO1xyXG4gICAgdGhpcy5hZGRUaW1lciA9IG51bGw7XHJcbiAgICB0aGlzLnJlc0RhdGEgPSBudWxsO1xyXG4gICAgdGhpcy5saW1pdFRpbWVzID0gbnVsbDtcclxuICAgIHRoaXMubmV0VHlwZUFycmF5ID0gW1widW5kZWZpbmVkXCIsIFwiZXRoZXJuZXRcIiwgXCJ3aWZpXCIsIFwiZWRnZVwiLCBcIjJnXCIsIFwiM2dcIixcIjRnXCJdO1xyXG4gICAgdGhpcy5pbml0KCk7XHJcbn1cclxuXHJcblJlZFJhaW4ucHJvdG90eXBlID0ge1xyXG4gICAgY29uc3RydWN0b3IgOiBSZWRSYWluLFxyXG4gICAgaW5pdCA6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5zZXREZWZhdWx0KCk7IC8v6L+b5YWl6YeN572u5pWI5p6cXHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnQoKTtcclxuICAgIH0sXHJcbiAgICBiaW5kRXZlbnQgOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyICRib2R5ID0gJCgnYm9keScpO1xyXG5cclxuICAgICAgICAvL+W8gOWni+aKveWlllxyXG4gICAgICAgICRib2R5Lm9uKCd0b3VjaHN0YXJ0JywnI3N0YXJ0JyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRXYWl0VGltZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+aKveS4ree6ouWMhVxyXG4gICAgICAgICRib2R5Lm9uKCd0b3VjaHN0YXJ0JywnLmNvdXRlbiBsaScsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYoX3RoaXMuYWpheGluZykgcmV0dXJuO1xyXG4gICAgICAgICAgICBfdGhpcy5nZXRQcml6ZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+WFs+mXreW8ueeql1xyXG4gICAgICAgICRib2R5Lm9uKCd0b3VjaHN0YXJ0JywnLmNsb3NlLC5jbG9zZS1idG4nLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIF90aGlzLmhpZGVQcml6ZSgpO1xyXG4gICAgICAgICAgICBfdGhpcy5yZXNldFJhaW4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG4gICAgc2V0V2FpdFRpbWU6ZnVuY3Rpb24oKXsgICAgIC8q6K6+572u562J5b6F5pe26Ze0M+enkiovXHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLndhaXRUaW1lID0gMztcclxuICAgICAgICB2YXIgJHN0YXJ0ID0gJCgnI3N0YXJ0LC5zdGFydGx2Jyk7XHJcbiAgICAgICAgdmFyICR3YWl0ID0gJCgnLmJhY2t3YXJkJyk7XHJcbiAgICAgICAgdmFyICRjb3VudCA9ICQoJy5jb3VudCcpO1xyXG5cclxuICAgICAgICAkc3RhcnQuaGlkZSgpO1xyXG4gICAgICAgICRjb3VudC5oaWRlKCk7XHJcbiAgICAgICAgJHdhaXQuc2hvdygpO1xyXG4gICAgICAgICR3YWl0LmZpbmQoJ3NwYW4nKS50ZXh0KHRoaXMud2FpdFRpbWUpO1xyXG4gICAgICAgICQoJyNjb250YW5lcicpLmVtcHR5KCk7XHJcbiAgICAgICAgdGhpcy5yZXNEYXRhID0ge307XHJcblxyXG4gICAgICAgIHZhciB0aW1lciA9IG51bGw7XHJcbiAgICAgICAgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBfdGhpcy53YWl0VGltZS0tO1xyXG4gICAgICAgICAgICBpZihfdGhpcy53YWl0VGltZT4wKXtcclxuICAgICAgICAgICAgICAgICR3YWl0LmZpbmQoJ3NwYW4nKS50ZXh0KF90aGlzLndhaXRUaW1lKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkd2FpdC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGFydFJhaW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sMTAwMCk7XHJcbiAgICB9LFxyXG4gICAgc3RhcnRSYWluOmZ1bmN0aW9uKCl7ICAgICAgIC8q5byA5aeL57qi5YyF6Zuo5Yqo55S7Ki9cclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciAkZ3VhbmcgPSAkKCcuZ3VhbmcnKTtcclxuICAgICAgICB2YXIgJGNvdXRlbiA9ICQoXCIuY291dGVuXCIpO1xyXG4gICAgICAgIHZhciAkbGlJdGVtID0gJGNvdXRlbi5maW5kKCdsaScpO1xyXG4gICAgICAgIHZhciB3aW4gPSAocGFyc2VJbnQoJGNvdXRlbi5jc3MoXCJ3aWR0aFwiKSkpIC0gNjA7XHJcbiAgICAgICAgdmFyIG51bSA9IDA7XHJcblxyXG4gICAgICAgICRndWFuZy5zaG93KCk7XHJcbiAgICAgICAgJGNvdXRlbi5jc3MoXCJoZWlnaHRcIiwgJChkb2N1bWVudCkuaGVpZ2h0KCkpO1xyXG4gICAgICAgICRsaUl0ZW0uY3NzKHt9KTtcclxuXHJcbiAgICAgICAgdmFyIGFkZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgaGIgPSBwYXJzZUludChNYXRoLnJhbmRvbSgpICogKDMgLSAxKSArIDEpO1xyXG4gICAgICAgICAgICB2YXIgV2ggPSBwYXJzZUludChNYXRoLnJhbmRvbSgpICogKDUwIC0gMzApICsgMzApO1xyXG4gICAgICAgICAgICB2YXIgTGVmdCA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiB3aW4pO1xyXG4gICAgICAgICAgICB2YXIgcm90ID0gKHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAoNDUgLSAoLTQ1KSkgLSA0NSkpICsgXCJkZWdcIjtcclxuICAgICAgICAgICAgbnVtKys7XHJcbiAgICAgICAgICAgICRjb3V0ZW4uYXBwZW5kKFwiPGxpIGNsYXNzPSdsaVwiICsgbnVtICsgXCInID48YSBocmVmPSdqYXZhc2NyaXB0OjsnPjxpbWcgc3JjPScuL2Rpc3QvaW1nL3JlZFJhaW4vbW9uZXloYl9cIiArIGhiICsgXCIucG5nJz48L2E+PC9saT5cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgJGxpTnVtID0gJChcIi5saVwiICsgbnVtKTtcclxuICAgICAgICAgICAgJGxpTnVtLmNzcyh7XHJcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogTGVmdFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChcIi5saVwiICsgbnVtICsgXCIgYSBpbWdcIikuY3NzKHtcclxuICAgICAgICAgICAgICAgIFwid2lkdGhcIjogV2gsXHJcbiAgICAgICAgICAgICAgICBcInRyYW5zZm9ybVwiOiBcInJvdGF0ZShcIiArIHJvdCArIFwiKVwiLFxyXG4gICAgICAgICAgICAgICAgXCItbXMtdHJhbnNmb3JtXCI6IFwicm90YXRlKFwiICsgcm90ICsgXCIpXCIsIC8qIEludGVybmV0IEV4cGxvcmVyICovXHJcbiAgICAgICAgICAgICAgICBcIi1tb3otdHJhbnNmb3JtXCI6IFwicm90YXRlKFwiICsgcm90ICsgXCIpXCIsIC8qIEZpcmVmb3ggKi9cclxuICAgICAgICAgICAgICAgIFwiLXdlYmtpdC10cmFuc2Zvcm1cIjogXCJyb3RhdGUoXCIgKyByb3QgKyBcIilcIiwvKiBTYWZhcmkg5ZKMIENocm9tZSAqL1xyXG4gICAgICAgICAgICAgICAgXCItby10cmFuc2Zvcm1cIjogXCJyb3RhdGUoXCIgKyByb3QgKyBcIilcIiAvKiBPcGVyYSAqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJGxpTnVtLmFuaW1hdGUoeyd0b3AnOiQod2luZG93KS5oZWlnaHQoKSsyMH0sNTAwMCxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgLy/liKDmjonlt7Lnu4/mmL7npLrnmoTnuqLljIVcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKClcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBfdGhpcy5hZGRUaW1lciA9IHNldFRpbWVvdXQoYWRkLDIwMClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGFkZCwzMDApO1xyXG4gICAgfSxcclxuICAgIHNldERlZmF1bHQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLnNldENhY2hlKCk7XHJcbiAgICAgICAgdGhpcy5nZXRUaW1lcygpOyAgICBcclxuICAgIH0sXHJcbiAgICBzZXRDYWNoZTpmdW5jdGlvbigpeyAgICAvKuiuvue9rue8k+WtmCovXHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIENGRyl7XHJcbiAgICAgICAgICAgIGlmIChDRkdba2V5XSA9PSAnJyAmJiB0aGlzLmdldFVybEl0ZW0oa2V5KSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBDRkdba2V5XSA9IHRoaXMuZ2V0VXJsSXRlbShrZXkpO1xyXG4gICAgICAgICAgICAgICAgc3RvcmUuc2V0KGtleSxDRkdba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2V0Q2xpY2tBbmFseXNpczpmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYoIXdpbmRvdy5faG10KXtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0Q2xpY2tBbmFseXNpcygpO1xyXG4gICAgICAgICAgICB9LDUwMClcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgd2luZG93Ll9obXQucHVzaChbJ190cmFja0V2ZW50JywgJ+e6ouWMhembqCcsJ+aKveWllicsICd0MyddKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2V0TGltaXRBbmFseXNpczpmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYoIXdpbmRvdy5faG10KXtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0TGltaXRBbmFseXNpcygpO1xyXG4gICAgICAgICAgICB9LDUwMClcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgd2luZG93Ll9obXQucHVzaChbJ190cmFja0V2ZW50JywgJ+e6ouWMhembqC3mrKHmlbDlt7LnlKjlrownLCfmir3lpZYnLCAndDMnXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGdldE5ldHdvcms6ZnVuY3Rpb24oKXsgICAgICAvKuiOt+WPlue9kee7nOeOr+WigyovXHJcbiAgICAgICAgdmFyIHQgPSBudWxsLFxyXG4gICAgICAgICAgICBuZXRUeXBlID0gMFxyXG4gICAgICAgICAgICAsIGUgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudFxyXG4gICAgICAgICAgICAsIG4gPSBuYXZpZ2F0b3IuY29ubmVjdGlvbiB8fCBuYXZpZ2F0b3IubW96Q29ubmVjdGlvbiB8fCBuYXZpZ2F0b3Iud2Via2l0Q29ubmVjdGlvbjtcclxuXHJcbiAgICAgICAgaWYgKC9NaWNyb01lc3Nlbmdlci8udGVzdChlKSlcclxuICAgICAgICAgICAgaWYgKC9OZXRUeXBlLy50ZXN0KGUpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGUubWF0Y2goL05ldFR5cGVcXC8oXFxTKikvKTtcclxuICAgICAgICAgICAgICAgIHQgPSBpWzFdO1xyXG4gICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJXZWl4aW5KU0JyaWRnZVJlYWR5XCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFdlaXhpbkpTQnJpZGdlLmludm9rZShcImdldE5ldHdvcmtUeXBlXCIsIHt9LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBlLmVycl9tc2dcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGVsc2UgaWYgKG4pIHtcclxuICAgICAgICAgICAgdmFyIG8gPSBuLnR5cGU7XHJcbiAgICAgICAgICAgIHQgPSBvO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgciA9IHRoaXMubmV0VHlwZUFycmF5O1xyXG4gICAgICAgIGlmICh0eXBlb2YodCkgIT0gJ3N0cmluZycpIHQgPSAndW5kZWZpbmVkJztcclxuICAgICAgICB0ID0gdC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGZvciAodmFyIGs9MDtrPHIubGVuZ3RoO2srKyl7XHJcbiAgICAgICAgICAgIGlmKHQuaW5kZXhPZihyW2tdKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBuZXRUeXBlID0gaztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXRUeXBlO1xyXG4gICAgfSxcclxuICAgIGNvbGxSZXFEYXRhOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHJlcURhdGEgPSB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlX2lkOiB3aW5kb3cuQ0ZHWyd0ZW1wbGF0ZV9pZCddLFxyXG4gICAgICAgICAgICBkZXZpY2VfaWQ6ICBzdG9yZS5nZXQoJ2RldmljZV9pZCcpIHx8IHRoaXMuZ2V0VXJsSXRlbSgnZGV2aWNlX2lkJyksXHJcbiAgICAgICAgICAgIGFwcF9pZDogc3RvcmUuZ2V0KCdhcHBfaWQnKSB8fHRoaXMuZ2V0VXJsSXRlbSgnYXBwX2lkJyksXHJcbiAgICAgICAgICAgIGFkc2xvdF9pZDogc3RvcmUuZ2V0KCdhZHNsb3RfaWQnKSB8fHRoaXMuZ2V0VXJsSXRlbSgnYWRzbG90X2lkJyksXHJcbiAgICAgICAgICAgIGNvbm5lY3RfdHlwZTogdGhpcy5nZXROZXR3b3JrKCksXHJcbiAgICAgICAgICAgIHdpZHRoOiAgJCh3aW5kb3cpLndpZHRoKCksXHJcbiAgICAgICAgICAgIGhlaWdodDogJCh3aW5kb3cpLmhlaWdodCgpLFxyXG4gICAgICAgICAgICB0aW1lc3RhbXA6ICtuZXcgRGF0ZSgpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHJlcURhdGE7XHJcbiAgICB9LFxyXG4gICAgZ2V0VGltZXM6ZnVuY3Rpb24oKXsgICAgLyrojrflj5bmir3lpZbmrKHmlbAqL1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGRldmljZUlkID0gc3RvcmUuZ2V0KCdkZXZpY2VfaWQnKSB8fCB0aGlzLmdldFVybEl0ZW0oJ2RldmljZV9pZCcpO1xyXG5cclxuICAgICAgICBpZiAoZGV2aWNlSWQgIT0gJ251bGwnKSB7XHJcbiAgICAgICAgICAgIHZhciB0aW1lc0RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZV9pZDogd2luZG93LkNGR1sndGVtcGxhdGVfaWQnXSxcclxuICAgICAgICAgICAgICAgIGFwcF9pZDogc3RvcmUuZ2V0KCdhcHBfaWQnKSB8fHRoaXMuZ2V0VXJsSXRlbSgnYXBwX2lkJyksXHJcbiAgICAgICAgICAgICAgICBhZHNsb3RfaWQ6IHN0b3JlLmdldCgnYWRzbG90X2lkJykgfHx0aGlzLmdldFVybEl0ZW0oJ2Fkc2xvdF9pZCcpLFxyXG4gICAgICAgICAgICAgICAgZGV2aWNlX2lkOiBkZXZpY2VJZCxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogK25ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvdXJsL2luaXQnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uO1wiLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkodGltZXNEYXRhKSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmxpbWl0VGltZXMgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5saW1pdFRpbWVzID0gcmVzdWx0LmxpbWl0VGltZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjb3VudFphJykudGV4dChfdGhpcy5saW1pdFRpbWVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBnZXRVcmxJdGVtOmZ1bmN0aW9uKG5hbWUpe1xyXG4gICAgICAgIHZhcsKgcmVnwqA9wqBuZXfCoFJlZ0V4cChcIihefCYpXCLCoCvCoG5hbWXCoCvCoFwiPShbXiZdKikoJnwkKVwiLMKgXCJpXCIpO1xyXG4gICAgICAgIHZhcsKgcsKgPcKgd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkubWF0Y2gocmVnKTtcclxuICAgICAgICBpZsKgKHLCoCE9wqBudWxsKcKgcmV0dXJuwqB1bmVzY2FwZShyWzJdKTvCoHJldHVybsKgbnVsbDtcclxuICAgIH0sXHJcbiAgICBnZXRQcml6ZTpmdW5jdGlvbigpeyAgICAvKuaKveS4ree6ouWMhe+8jOiOt+WPluWllumhuSovXHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnN0b3BSYWluKCk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMubGltaXRUaW1lczw9MCl7XHJcbiAgICAgICAgICAgIF90aGlzLnNldExpbWl0QW5hbHlzaXMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd0xpbWl0ZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWpheGluZyA9IHRydWU7XHJcbiAgICAgICAgX3RoaXMuc2V0Q2xpY2tBbmFseXNpcygpO1xyXG5cclxuICAgICAgICB2YXIgYWpheFRpbWVvdXRUZXN0ID0gJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL3VybC9hZHZlcnQnLFxyXG4gICAgICAgICAgICB0eXBlOiBcInBvc3RcIixcclxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjtcIixcclxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoX3RoaXMuY29sbFJlcURhdGEoKSksXHJcbiAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxyXG4gICAgICAgICAgICBjb21wbGV0ZSA6IGZ1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0LHN0YXR1cyl7IC8v6K+35rGC5a6M5oiQ5ZCO5pyA57uI5omn6KGM5Y+C5pWwXHJcbiAgICAgICAgICAgICAgICBpZihzdGF0dXM9PSd0aW1lb3V0Jyl7Ly/otoXml7Ysc3RhdHVz6L+Y5pyJc3VjY2VzcyxlcnJvcuetieWAvOeahOaDheWGtVxyXG4gICAgICAgICAgICAgICAgICAgIGFqYXhUaW1lb3V0VGVzdC5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmdldFByaXplRmFpbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZXNEYXRhID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubGltaXRUaW1lcyA9IHJlc3VsdC5saW1pdFRpbWVzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdCAmJiByZXN1bHQuZXJyb3JfY29kZSA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zaG93UHJpemUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0UHJpemVGYWlsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hamF4aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpe1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0UHJpemVGYWlsKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5hamF4aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZihlcnImJmVyci5saW1pdFRpbWVzKXtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5saW1pdFRpbWVzID0gZXJyLmxpbWl0VGltZXNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGdldFByaXplRmFpbDpmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmICh0aGlzLnJlc0RhdGFbJ2Vycm9yX2NvZGUnXSAmJiB0aGlzLnJlc0RhdGFbJ2xpbWl0VGltZXMnXSA+PSAwICl7XHJcbiAgICAgICAgICAgIHRoaXMubGltaXRUaW1lcyA9IHRoaXMucmVzRGF0YVsnbGltaXRUaW1lcyddO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dOb1Jlc3VsdCgpO1xyXG4gICAgfSxcclxuICAgIHNob3dQcml6ZTpmdW5jdGlvbigpeyAgIC8q5bGV56S65aWW6aG55by556qXKi9cclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciAkcG9wUG9zaXRpb24gPSAkKCcucG9wLXBvc2l0aW9uICcpO1xyXG5cclxuICAgICAgICB2YXIgJGNvdW50WmEgPSAkKCcjY291bnRaYScpO1xyXG4gICAgICAgIHRoaXMubGltaXRUaW1lcyA9IHRoaXMucmVzRGF0YS5saW1pdFRpbWVzO1xyXG4gICAgICAgICRjb3VudFphLnRleHQodGhpcy5saW1pdFRpbWVzfHwwKTtcclxuXHJcblxyXG4gICAgICAgIC8v6K+35rGC5oiQ5Yqf77yM5Y+R6YCB5qOA5rOiXHJcbiAgICAgICAgaWYgKF90aGlzLnJlc0RhdGFbJ2FkbXMnXSkge1xyXG4gICAgICAgICAgICB2YXIgYWRNc2cgPSBfdGhpcy5yZXNEYXRhWydhZG1zJ11bMF07XHJcblxyXG4gICAgICAgICAgICAkcG9wUG9zaXRpb24uZmluZCgnLnByaXplcy1pbWcnKS5hdHRyKCdzcmMnLGFkTXNnLmltZ3VybHMpO1xyXG4gICAgICAgICAgICAkcG9wUG9zaXRpb24uZmluZCgnLnByaXplcy1uYW1lJykudGV4dChhZE1zZy50aXRsZSk7XHJcblxyXG4gICAgICAgICAgICBfdGhpcy5zaG93TG9nKGFkTXNnWydpbXB0cmFja2VycyddKTtcclxuXHJcblxyXG4gICAgICAgICAgICAkKCcucHJpemVzLXpvb20tYm94JylcclxuICAgICAgICAgICAgICAgIC51bmJpbmQoIFwiY2xpY2tcIiApXHJcbiAgICAgICAgICAgICAgICAub24oJ2NsaWNrJyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2xpY2tMb2coYWRNc2dbJ2Nsa3RyYWNrZXJzJ10pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBhZE1zZ1snY2xrdXJsJ107IC8v6Lez6L2s6aG16Z2iXHJcbiAgICAgICAgICAgICAgICAgICAgfSw2MDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRwb3BQb3NpdGlvbi5maW5kKCcucHJpemVzLW5vLWNvbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLmZpbmQoJy5wcml6ZXMtY29udC1ib3gnKS5zaG93KCk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLmZhZGVJbigpO1xyXG5cclxuICAgIH0sXHJcbiAgICBzdG9wUmFpbjpmdW5jdGlvbigpeyAgICAvKuWBnOatoue6ouWMhembqOWKqOeUuyovXHJcbiAgICAgICAgdmFyICRjb3V0ZW4gPSAkKFwiLmNvdXRlblwiKTtcclxuICAgICAgICB2YXIgJGxpSXRlbSA9ICRjb3V0ZW4uZmluZCgnbGknKTtcclxuICAgICAgICAkbGlJdGVtLmNzcyh7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6MFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5hZGRUaW1lcik7XHJcbiAgICB9LFxyXG4gICAgc2hvd05vUmVzdWx0OmZ1bmN0aW9uKCl7ICAgIC8q6I635aWW5by556qXLeWksei0peW8ueeqlyovXHJcbiAgICAgICAgdmFyICRwb3BQb3NpdGlvbiA9ICQoJy5wb3AtcG9zaXRpb24gJyk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLmZpbmQoJy5wcml6ZXMtbm8tY29udCcpLnNob3coKTtcclxuICAgICAgICAkcG9wUG9zaXRpb24uZmluZCgnLnByaXplcy1jb250LWJveCcpLmhpZGUoKTtcclxuICAgICAgICAkKCcucHJpemVzLW5vLWNvbnQgLnByaXplcy1uby1pbWcnKS5hdHRyKCdzcmMnLCcuL2Rpc3QvaW1nL3JlZFJhaW4vcHJpemVzLXBvcC1mYWlsLnBuZycpO1xyXG4gICAgICAgICRwb3BQb3NpdGlvbi5zaG93KCk7XHJcbiAgICB9LFxyXG4gICAgc2hvd0xpbWl0ZWQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgJHBvcFBvc2l0aW9uID0gJCgnLnBvcC1wb3NpdGlvbiAnKTtcclxuICAgICAgICAkcG9wUG9zaXRpb24uZmluZCgnLnByaXplcy1uby1jb250Jykuc2hvdygpO1xyXG4gICAgICAgICRwb3BQb3NpdGlvbi5maW5kKCcucHJpemVzLWNvbnQtYm94JykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5wcml6ZXMtbm8tY29udCAucHJpemVzLW5vLWltZycpLmF0dHIoJ3NyYycsJy4vZGlzdC9pbWcvcmVkUmFpbi9wcml6ZXMtcG9wLW5vLnBuZycpO1xyXG4gICAgICAgICRwb3BQb3NpdGlvbi5zaG93KCk7XHJcbiAgICB9LFxyXG4gICAgaGlkZVByaXplOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyICRwb3BQb3NpdGlvbiA9ICQoJy5wb3AtcG9zaXRpb24gJyk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLmhpZGUoKTtcclxuICAgIH0sXHJcbiAgICByZXNldFJhaW46ZnVuY3Rpb24oKXsgICAgICAgLyrph43nva7mir3lpZbliJ3lp4vljJbpobXpnaIqL1xyXG4gICAgICAgIHZhciAkZ3VhbmcgPSAkKCcuZ3VhbmcnKTtcclxuICAgICAgICB2YXIgJHN0YXJ0ID0gJChcIiNzdGFydCwuc3RhcnRsdlwiKTtcclxuICAgICAgICB2YXIgJGJhY2t3YXJkID0gJCgnLmJhY2t3YXJkJyk7XHJcbiAgICAgICAgdmFyICRjb3VudCA9ICQoJy5jb3VudCcpO1xyXG4gICAgICAgICQoJyNjb3VudFphJykudGV4dCh0aGlzLmxpbWl0VGltZXMpO1xyXG5cclxuICAgICAgICAkZ3VhbmcuaGlkZSgpO1xyXG4gICAgICAgICRzdGFydC5zaG93KCk7XHJcbiAgICAgICAgJGJhY2t3YXJkLmhpZGUoKTtcclxuICAgICAgICAkY291bnQuc2hvdygpO1xyXG4gICAgfSxcclxuICAgIHNob3dMb2c6ZnVuY3Rpb24odXJsQXJyYXkpe1xyXG4gICAgICAgIGlmICh1cmxBcnJheS5sZW5ndGggPCAxICkgcmV0dXJuO1xyXG4gICAgICAgIGZvcih2YXIgaT0wO2k8dXJsQXJyYXkubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICQoJyNjb250YW5lcicpLmFwcGVuZCgnPGltZyBjbGFzcz1cImltcHRyYWNlXCIgc3JjPVwiJysgdXJsQXJyYXlbaV0gKydcIiAvPicpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjbGlja0xvZzpmdW5jdGlvbih1cmxBcnJheSl7XHJcbiAgICAgICAgaWYgKHVybEFycmF5Lmxlbmd0aCA8IDEgKSByZXR1cm47XHJcbiAgICAgICAgZm9yKHZhciBqPTA7ajx1cmxBcnJheS5sZW5ndGg7aisrKXtcclxuICAgICAgICAgICAgJCgnI2NvbnRhbmVyJykuYXBwZW5kKCc8aW1nIGNsYXNzPVwiY2xpY2t0cmFjZVwiIHNyYz1cIicrIHVybEFycmF5W2pdICsnXCIgLz4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBSZWRSYWluKCk7Il19"}