{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/luckyDice/index.js"],"names":[],"mappings":"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","file":"luckyDice.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","console.log('luckyDice');\r\n\r\nif (!Array.from) {\r\n    Array.from = (function () {\r\n        var toStr = Object.prototype.toString;\r\n        var isCallable = function (fn) {\r\n            return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\r\n        };\r\n        var toInteger = function (value) {\r\n            var number = Number(value);\r\n            if (isNaN(number)) { return 0; }\r\n            if (number === 0 || !isFinite(number)) { return number; }\r\n            return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\r\n        };\r\n        var maxSafeInteger = Math.pow(2, 53) - 1;\r\n        var toLength = function (value) {\r\n            var len = toInteger(value);\r\n            return Math.min(Math.max(len, 0), maxSafeInteger);\r\n        };\r\n\r\n        return function from(arrayLike/*, mapFn, thisArg */) {\r\n            var C = this;\r\n\r\n            var items = Object(arrayLike);\r\n\r\n            if (arrayLike == null) {\r\n                throw new TypeError(\"Array.from requires an array-like object - not null or undefined\");\r\n            }\r\n\r\n            var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\r\n            var T;\r\n            if (typeof mapFn !== 'undefined') {\r\n                if (!isCallable(mapFn)) {\r\n                    throw new TypeError('Array.from: when provided, the second argument must be a function');\r\n                }\r\n\r\n                if (arguments.length > 2) {\r\n                    T = arguments[2];\r\n                }\r\n            }\r\n\r\n            var len = toLength(items.length);\r\n\r\n            var A = isCallable(C) ? Object(new C(len)) : new Array(len);\r\n\r\n            var k = 0;\r\n            var kValue;\r\n            while (k < len) {\r\n                kValue = items[k];\r\n                if (mapFn) {\r\n                    A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\r\n                } else {\r\n                    A[k] = kValue;\r\n                }\r\n                k += 1;\r\n            }\r\n            A.length = len;\r\n            return A;\r\n        };\r\n    }());\r\n}\r\n\r\n\r\nvar LuckyDice = function(){\r\n    this.limitTimes = null;     //允许转动的次数；\r\n    this.resData = null;\r\n    this.index = -1;\r\n    this.noIndex = -1;\r\n    this.netTypeArray = [\"undefined\", \"ethernet\", \"wifi\", \"edge\", \"2g\", \"3g\",\"4g\"];\r\n\r\n    this.$start = $('.main .start');\r\n    this.$dice = $('.main .dice-content');\r\n\r\n    this.init();\r\n};\r\nLuckyDice.prototype = {\r\n    constructor: LuckyDice,\r\n    init: function () {\r\n        this.setDefault(); //进入重置效果\r\n        this.bindEvent();\r\n        this.reSortList();\r\n    },\r\n    bindEvent:function(){\r\n        let _this = this;\r\n\r\n        $(\"body\").on(\"touchend\",'.start', function() {\r\n\r\n            if($(this).hasClass('moving')||$(this).attr('class').indexOf('end')>=0)return;\r\n\r\n            if(!_this.limitTimes||_this.limitTimes<=0){\r\n                _this.setLimitAnalysis();\r\n                return _this.showLimited();\r\n            }else{\r\n                $('#countZa').text(_this.limitTimes-1);\r\n                _this.setClickAnalysis();\r\n                _this.getPrize();\r\n                _this.$start.removeClass('ready').addClass('moving');\r\n                _this.$dice.removeClass('ready').addClass('moving');\r\n                setTimeout(function () {\r\n                    _this.$start.removeClass('moving').addClass('end');\r\n                    let result = _this.resData;\r\n                    if(result && result.error_code == 0){\r\n                        _this.$dice.removeClass('moving').addClass('end end'+_this.index);\r\n                    } else {\r\n                        _this.$dice.removeClass('moving').addClass('end end'+_this.noIndex);\r\n                    }\r\n                    setTimeout(function(){\r\n                        let result = _this.resData;\r\n                        if(result && result.error_code == 0){\r\n                            _this.showPrize();\r\n                        } else {\r\n                            _this.getPrizeFail();\r\n                        }\r\n                    },800)\r\n                },1500)\r\n            }\r\n        });\r\n\r\n\r\n\r\n        //关闭弹窗\r\n        $('.pop-position').on('touchstart','.close,.close-btn',function(){\r\n            _this.hidePrize();\r\n        });\r\n\r\n    },\r\n    setDefault:function(){\r\n        this.setCache();\r\n        this.iScrollInit();\r\n        this.getTimes();\r\n\r\n    },\r\n    setClickAnalysis:function(){\r\n        let _this = this;\r\n        if(!window._hmt){\r\n            setTimeout(function(){\r\n                _this.setClickAnalysis();\r\n            },500)\r\n        }else{\r\n            window._hmt.push(['_trackEvent', '掷骰子','抽奖', 't6']);\r\n        }\r\n    },\r\n    setLimitAnalysis:function(){\r\n        let _this = this;\r\n        if(!window._hmt){\r\n            setTimeout(function(){\r\n                _this.setLimitAnalysis();\r\n            },500)\r\n        }else{\r\n            window._hmt.push(['_trackEvent', '掷骰子-次数已用完','抽奖', 't6']);\r\n        }\r\n    },\r\n    iScrollInit:function(){\r\n        let $item =  $('#prize-list').find('.prize-item');\r\n        if($item.length>5){\r\n            window.myScroll = new IScroll('#prize-list', {\r\n                scrollX:true\r\n            });\r\n        }\r\n    },\r\n    reSortList:function(){\r\n        let $item = $('.prize-item');\r\n        let itemArr = Array.from($item);\r\n        itemArr.sort(function(a,b){return Math.random()-0.5; });\r\n        $('.prizes-wrapper').html('');\r\n        itemArr.forEach(function(i){ $('.prizes-wrapper').append($(i)) });\r\n        this.index = $('.prize-item[data-prize=\"true\"]').index() +1;\r\n        this.noIndex = $('.prize-item[data-prize=\"no\"]').index() +1;\r\n    },\r\n    getTimes:function(){    /*获取抽奖次数*/\r\n        var _this = this;\r\n        var deviceId = store.get('device_id') || this.getUrlItem('device_id');\r\n\r\n        if (deviceId != 'null') {\r\n            var timesData = {\r\n                template_id: window.CFG['template_id'],\r\n                app_id: store.get('app_id') ||this.getUrlItem('app_id'),\r\n                adslot_id: store.get('adslot_id') ||this.getUrlItem('adslot_id'),\r\n                device_id: deviceId,\r\n                timestamp: +new Date(),\r\n            };\r\n            $.ajax({\r\n                url: '/url/init',\r\n                type: \"post\",\r\n                contentType: \"application/json;\",\r\n                data: JSON.stringify(timesData),\r\n                success: function (result) {\r\n                    if (result.limitTimes >= 0) {\r\n                        _this.limitTimes = result.limitTimes;\r\n                        $('#countZa').text(_this.limitTimes);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    },\r\n    setCache:function(){    /*设置缓存*/\r\n        for (var key in CFG){\r\n            if (CFG[key] == '' && this.getUrlItem(key) != null) {\r\n                CFG[key] = this.getUrlItem(key);\r\n                store.set(key,CFG[key]);\r\n            }\r\n        }\r\n    },\r\n    getUrlItem:function(name){\r\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n        var r = window.location.search.substr(1).match(reg);\r\n        if (r != null) return unescape(r[2]); return null;\r\n    },\r\n    getPrize:function(){    /*抽中红包，获取奖项*/\r\n        var _this = this;\r\n\r\n        this.resData = {};\r\n\r\n        var ajaxTimeoutTest = $.ajax({\r\n            url: '/url/advert',\r\n            type: \"post\",\r\n            contentType: \"application/json;\",\r\n            data: JSON.stringify(_this.collReqData()),\r\n            timeout: 3000,\r\n            complete : function(XMLHttpRequest,status){ //请求完成后最终执行参数\r\n                if(status=='timeout'){//超时,status还有success,error等值的情况\r\n                    ajaxTimeoutTest.abort();\r\n                    _this.getPrizeFail();\r\n                }\r\n                _this.resData = XMLHttpRequest.responseJSON||{};\r\n                if (_this.resData.error_code == 0) {\r\n                    _this.limitTimes = _this.resData.limitTimes;\r\n                }\r\n            }\r\n        });\r\n    },\r\n    getPrizeFail:function(){\r\n        if (this.resData['error_code'] && this.resData['limitTimes'] > 0 ){\r\n            this.limitTimes = this.resData['limitTimes'];\r\n        }\r\n        this.showNoResult();\r\n    },\r\n    showPrize:function(){\r\n        var _this = this;\r\n        var $popPosition = $('.pop-position ');\r\n\r\n        var $countZa = $('#countZa');\r\n        this.limitTimes = this.resData&&this.resData.limitTimes;\r\n        $countZa.text(this.limitTimes||0);\r\n\r\n\r\n        //请求成功，发送检波\r\n        if (_this.resData['adms']) {\r\n            var adMsg = _this.resData['adms'][0];\r\n\r\n            $popPosition.find('.prizes-img').attr('src',adMsg.imgurls);\r\n            $popPosition.find('.prizes-name').text(adMsg.title);\r\n\r\n            _this.showLog(adMsg['imptrackers']);\r\n\r\n\r\n            $('.prizes-zoom-box,#hdgg_click_ad_btn')\r\n                .unbind( \"click\" )\r\n                .on('click',function () {\r\n                    _this.clickLog(adMsg['clktrackers']);\r\n\r\n                    setTimeout(function () {\r\n                        window.location.href = adMsg['clkurl']; //跳转页面\r\n                    },600);\r\n                });\r\n        }\r\n        $popPosition.find('.prizes-no-cont').hide();\r\n        $popPosition.find('.prizes-cont-box').removeClass('hdgg_result_hide_animation').addClass('hdgg_result_show_animation').show();\r\n        $popPosition.show();\r\n\r\n    },\r\n    showNoResult:function(){\r\n        var $popPosition = $('.pop-position ');\r\n        $popPosition.find('.prizes-no-cont').show();\r\n        $popPosition.find('.prizes-cont-box').hide();\r\n        $('.prizes-no-cont .prizes-no-img').attr('src','./dist/img/luckyDice/prizes-pop-fail.png');\r\n        $popPosition.show();\r\n    },\r\n    showLimited:function(){\r\n        var $popPosition = $('.pop-position ');\r\n        $popPosition.find('.prizes-no-cont').show();\r\n        $popPosition.find('.prizes-cont-box').hide();\r\n        $('.prizes-no-cont .prizes-no-img').attr('src','./dist/img/luckyDice/prizes-pop-no.png');\r\n        $popPosition.show();\r\n    },\r\n    hidePrize:function(){\r\n        var $popPosition = $('.pop-position ');\r\n        $popPosition.find('.prizes-no-cont').hide();\r\n        $popPosition.find('.prizes-cont-box').removeClass('hdgg_result_show_animation').addClass('hdgg_result_hide_animation');\r\n        $popPosition.fadeOut();\r\n\r\n        this.$start.removeClass('end end1 end2 end3 end4 end5 end6').addClass('ready');\r\n        this.$dice.removeClass('end end1 end2 end3 end4 end5 end6').addClass('ready');\r\n        this.reSortList();\r\n\r\n    },\r\n    showLog:function(urlArray){\r\n        if (urlArray.length < 1 ) return;\r\n        for(var i=0;i<urlArray.length;i++){\r\n            $('#contaner').append('<img class=\"imptrace\" src=\"'+ urlArray[i] +'\" />');\r\n        }\r\n    },\r\n    clickLog:function(urlArray){\r\n        if (urlArray.length < 1 ) return;\r\n        for(var j=0;j<urlArray.length;j++){\r\n            $('#contaner').append('<img class=\"clicktrace\" src=\"'+ urlArray[j] +'\" />');\r\n        }\r\n    },\r\n    getNetwork:function(){      /*获取网络环境*/\r\n        var t = null,\r\n            netType = 0\r\n            , e = window.navigator.userAgent\r\n            , n = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\r\n\r\n        if (/MicroMessenger/.test(e))\r\n            if (/NetType/.test(e)) {\r\n                var i = e.match(/NetType\\/(\\S*)/);\r\n                t = i[1];\r\n            } else\r\n                document.addEventListener(\"WeixinJSBridgeReady\", function() {\r\n                    WeixinJSBridge.invoke(\"getNetworkType\", {}, function(e) {\r\n                        t = e.err_msg\r\n                    });\r\n                });\r\n        else if (n) {\r\n            var o = n.type;\r\n            t = o;\r\n        }\r\n        var r = this.netTypeArray;\r\n        if (typeof(t) != 'string') t = 'undefined';\r\n        t = t.toLowerCase();\r\n        for (var k=0;k<r.length;k++){\r\n            if(t.indexOf(r[k]) > -1) {\r\n                netType = k;\r\n                break;\r\n            }\r\n        }\r\n        return netType;\r\n    },\r\n    collReqData:function(){\r\n        var reqData = {\r\n            template_id: window.CFG['template_id'],\r\n            device_id:  store.get('device_id') || this.getUrlItem('device_id'),\r\n            app_id: store.get('app_id') ||this.getUrlItem('app_id'),\r\n            adslot_id: store.get('adslot_id') ||this.getUrlItem('adslot_id'),\r\n            connect_type: this.getNetwork(),\r\n            width:  $(window).width(),\r\n            height: $(window).height(),\r\n            timestamp: +new Date(),\r\n        };\r\n        return reqData;\r\n    }\r\n};\r\n\r\n\r\nnew LuckyDice();"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvbHVja3lEaWNlL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxRQUFRLEdBQVIsQ0FBWSxXQUFaOztBQUVBLElBQUksQ0FBQyxNQUFNLElBQVgsRUFBaUI7QUFDYixVQUFNLElBQU4sR0FBYyxZQUFZO0FBQ3RCLFlBQUksUUFBUSxPQUFPLFNBQVAsQ0FBaUIsUUFBN0I7QUFDQSxZQUFJLGFBQWEsU0FBYixVQUFhLENBQVUsRUFBVixFQUFjO0FBQzNCLG1CQUFPLE9BQU8sRUFBUCxLQUFjLFVBQWQsSUFBNEIsTUFBTSxJQUFOLENBQVcsRUFBWCxNQUFtQixtQkFBdEQ7QUFDSCxTQUZEO0FBR0EsWUFBSSxZQUFZLFNBQVosU0FBWSxDQUFVLEtBQVYsRUFBaUI7QUFDN0IsZ0JBQUksU0FBUyxPQUFPLEtBQVAsQ0FBYjtBQUNBLGdCQUFJLE1BQU0sTUFBTixDQUFKLEVBQW1CO0FBQUUsdUJBQU8sQ0FBUDtBQUFXO0FBQ2hDLGdCQUFJLFdBQVcsQ0FBWCxJQUFnQixDQUFDLFNBQVMsTUFBVCxDQUFyQixFQUF1QztBQUFFLHVCQUFPLE1BQVA7QUFBZ0I7QUFDekQsbUJBQU8sQ0FBQyxTQUFTLENBQVQsR0FBYSxDQUFiLEdBQWlCLENBQUMsQ0FBbkIsSUFBd0IsS0FBSyxLQUFMLENBQVcsS0FBSyxHQUFMLENBQVMsTUFBVCxDQUFYLENBQS9CO0FBQ0gsU0FMRDtBQU1BLFlBQUksaUJBQWlCLEtBQUssR0FBTCxDQUFTLENBQVQsRUFBWSxFQUFaLElBQWtCLENBQXZDO0FBQ0EsWUFBSSxXQUFXLFNBQVgsUUFBVyxDQUFVLEtBQVYsRUFBaUI7QUFDNUIsZ0JBQUksTUFBTSxVQUFVLEtBQVYsQ0FBVjtBQUNBLG1CQUFPLEtBQUssR0FBTCxDQUFTLEtBQUssR0FBTCxDQUFTLEdBQVQsRUFBYyxDQUFkLENBQVQsRUFBMkIsY0FBM0IsQ0FBUDtBQUNILFNB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dUJBQVcsQ0FBQyxJQUFJLElBQUo7QUFSRixTQUFkO0FBVUEsZUFBTyxPQUFQO0FBQ0g7QUFwUmlCLENBQXRCOztBQXdSQSxJQUFJLFNBQUoiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY29uc29sZS5sb2coJ2x1Y2t5RGljZScpO1xyXG5cclxuaWYgKCFBcnJheS5mcm9tKSB7XHJcbiAgICBBcnJheS5mcm9tID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xyXG4gICAgICAgIHZhciBpc0NhbGxhYmxlID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgfHwgdG9TdHIuY2FsbChmbikgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdG9JbnRlZ2VyID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBudW1iZXIgPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4obnVtYmVyKSkgeyByZXR1cm4gMDsgfVxyXG4gICAgICAgICAgICBpZiAobnVtYmVyID09PSAwIHx8ICFpc0Zpbml0ZShudW1iZXIpKSB7IHJldHVybiBudW1iZXI7IH1cclxuICAgICAgICAgICAgcmV0dXJuIChudW1iZXIgPiAwID8gMSA6IC0xKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobnVtYmVyKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xyXG4gICAgICAgIHZhciB0b0xlbmd0aCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgbGVuID0gdG9JbnRlZ2VyKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGxlbiwgMCksIG1heFNhZmVJbnRlZ2VyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZnJvbShhcnJheUxpa2UvKiwgbWFwRm4sIHRoaXNBcmcgKi8pIHtcclxuICAgICAgICAgICAgdmFyIEMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gT2JqZWN0KGFycmF5TGlrZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYXJyYXlMaWtlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBcnJheS5mcm9tIHJlcXVpcmVzIGFuIGFycmF5LWxpa2Ugb2JqZWN0IC0gbm90IG51bGwgb3IgdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbWFwRm4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB2YXIgVDtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXBGbiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNDYWxsYWJsZShtYXBGbikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5mcm9tOiB3aGVuIHByb3ZpZGVkLCB0aGUgc2Vjb25kIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIFQgPSBhcmd1bWVudHNbMl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBsZW4gPSB0b0xlbmd0aChpdGVtcy5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIEEgPSBpc0NhbGxhYmxlKEMpID8gT2JqZWN0KG5ldyBDKGxlbikpIDogbmV3IEFycmF5KGxlbik7XHJcblxyXG4gICAgICAgICAgICB2YXIgayA9IDA7XHJcbiAgICAgICAgICAgIHZhciBrVmFsdWU7XHJcbiAgICAgICAgICAgIHdoaWxlIChrIDwgbGVuKSB7XHJcbiAgICAgICAgICAgICAgICBrVmFsdWUgPSBpdGVtc1trXTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXBGbikge1xyXG4gICAgICAgICAgICAgICAgICAgIEFba10gPSB0eXBlb2YgVCA9PT0gJ3VuZGVmaW5lZCcgPyBtYXBGbihrVmFsdWUsIGspIDogbWFwRm4uY2FsbChULCBrVmFsdWUsIGspO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBBW2tdID0ga1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgayArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEEubGVuZ3RoID0gbGVuO1xyXG4gICAgICAgICAgICByZXR1cm4gQTtcclxuICAgICAgICB9O1xyXG4gICAgfSgpKTtcclxufVxyXG5cclxuXHJcbnZhciBMdWNreURpY2UgPSBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5saW1pdFRpbWVzID0gbnVsbDsgICAgIC8v5YWB6K646L2s5Yqo55qE5qyh5pWw77ybXHJcbiAgICB0aGlzLnJlc0RhdGEgPSBudWxsO1xyXG4gICAgdGhpcy5pbmRleCA9IC0xO1xyXG4gICAgdGhpcy5ub0luZGV4ID0gLTE7XHJcbiAgICB0aGlzLm5ldFR5cGVBcnJheSA9IFtcInVuZGVmaW5lZFwiLCBcImV0aGVybmV0XCIsIFwid2lmaVwiLCBcImVkZ2VcIiwgXCIyZ1wiLCBcIjNnXCIsXCI0Z1wiXTtcclxuXHJcbiAgICB0aGlzLiRzdGFydCA9ICQoJy5tYWluIC5zdGFydCcpO1xyXG4gICAgdGhpcy4kZGljZSA9ICQoJy5tYWluIC5kaWNlLWNvbnRlbnQnKTtcclxuXHJcbiAgICB0aGlzLmluaXQoKTtcclxufTtcclxuTHVja3lEaWNlLnByb3RvdHlwZSA9IHtcclxuICAgIGNvbnN0cnVjdG9yOiBMdWNreURpY2UsXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXREZWZhdWx0KCk7IC8v6L+b5YWl6YeN572u5pWI5p6cXHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnQoKTtcclxuICAgICAgICB0aGlzLnJlU29ydExpc3QoKTtcclxuICAgIH0sXHJcbiAgICBiaW5kRXZlbnQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAkKFwiYm9keVwiKS5vbihcInRvdWNoZW5kXCIsJy5zdGFydCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcygnbW92aW5nJyl8fCQodGhpcykuYXR0cignY2xhc3MnKS5pbmRleE9mKCdlbmQnKT49MClyZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZighX3RoaXMubGltaXRUaW1lc3x8X3RoaXMubGltaXRUaW1lczw9MCl7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRMaW1pdEFuYWx5c2lzKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2hvd0xpbWl0ZWQoKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAkKCcjY291bnRaYScpLnRleHQoX3RoaXMubGltaXRUaW1lcy0xKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldENsaWNrQW5hbHlzaXMoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmdldFByaXplKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy4kc3RhcnQucmVtb3ZlQ2xhc3MoJ3JlYWR5JykuYWRkQ2xhc3MoJ21vdmluZycpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuJGRpY2UucmVtb3ZlQ2xhc3MoJ3JlYWR5JykuYWRkQ2xhc3MoJ21vdmluZycpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0YXJ0LnJlbW92ZUNsYXNzKCdtb3ZpbmcnKS5hZGRDbGFzcygnZW5kJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IF90aGlzLnJlc0RhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0ICYmIHJlc3VsdC5lcnJvcl9jb2RlID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZGljZS5yZW1vdmVDbGFzcygnbW92aW5nJykuYWRkQ2xhc3MoJ2VuZCBlbmQnK190aGlzLmluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZGljZS5yZW1vdmVDbGFzcygnbW92aW5nJykuYWRkQ2xhc3MoJ2VuZCBlbmQnK190aGlzLm5vSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBfdGhpcy5yZXNEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQgJiYgcmVzdWx0LmVycm9yX2NvZGUgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zaG93UHJpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdldFByaXplRmFpbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSw4MDApXHJcbiAgICAgICAgICAgICAgICB9LDE1MDApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgICAvL+WFs+mXreW8ueeql1xyXG4gICAgICAgICQoJy5wb3AtcG9zaXRpb24nKS5vbigndG91Y2hzdGFydCcsJy5jbG9zZSwuY2xvc2UtYnRuJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBfdGhpcy5oaWRlUHJpemUoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG4gICAgc2V0RGVmYXVsdDpmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMuc2V0Q2FjaGUoKTtcclxuICAgICAgICB0aGlzLmlTY3JvbGxJbml0KCk7XHJcbiAgICAgICAgdGhpcy5nZXRUaW1lcygpO1xyXG5cclxuICAgIH0sXHJcbiAgICBzZXRDbGlja0FuYWx5c2lzOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgICAgICBpZighd2luZG93Ll9obXQpe1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRDbGlja0FuYWx5c2lzKCk7XHJcbiAgICAgICAgICAgIH0sNTAwKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB3aW5kb3cuX2htdC5wdXNoKFsnX3RyYWNrRXZlbnQnLCAn5o636aqw5a2QJywn5oq95aWWJywgJ3Q2J10pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzZXRMaW1pdEFuYWx5c2lzOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgICAgICBpZighd2luZG93Ll9obXQpe1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRMaW1pdEFuYWx5c2lzKCk7XHJcbiAgICAgICAgICAgIH0sNTAwKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB3aW5kb3cuX2htdC5wdXNoKFsnX3RyYWNrRXZlbnQnLCAn5o636aqw5a2QLeasoeaVsOW3sueUqOWujCcsJ+aKveWllicsICd0NiddKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgaVNjcm9sbEluaXQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgJGl0ZW0gPSAgJCgnI3ByaXplLWxpc3QnKS5maW5kKCcucHJpemUtaXRlbScpO1xyXG4gICAgICAgIGlmKCRpdGVtLmxlbmd0aD41KXtcclxuICAgICAgICAgICAgd2luZG93Lm15U2Nyb2xsID0gbmV3IElTY3JvbGwoJyNwcml6ZS1saXN0Jywge1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsWDp0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZVNvcnRMaXN0OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0ICRpdGVtID0gJCgnLnByaXplLWl0ZW0nKTtcclxuICAgICAgICBsZXQgaXRlbUFyciA9IEFycmF5LmZyb20oJGl0ZW0pO1xyXG4gICAgICAgIGl0ZW1BcnIuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBNYXRoLnJhbmRvbSgpLTAuNTsgfSk7XHJcbiAgICAgICAgJCgnLnByaXplcy13cmFwcGVyJykuaHRtbCgnJyk7XHJcbiAgICAgICAgaXRlbUFyci5mb3JFYWNoKGZ1bmN0aW9uKGkpeyAkKCcucHJpemVzLXdyYXBwZXInKS5hcHBlbmQoJChpKSkgfSk7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9ICQoJy5wcml6ZS1pdGVtW2RhdGEtcHJpemU9XCJ0cnVlXCJdJykuaW5kZXgoKSArMTtcclxuICAgICAgICB0aGlzLm5vSW5kZXggPSAkKCcucHJpemUtaXRlbVtkYXRhLXByaXplPVwibm9cIl0nKS5pbmRleCgpICsxO1xyXG4gICAgfSxcclxuICAgIGdldFRpbWVzOmZ1bmN0aW9uKCl7ICAgIC8q6I635Y+W5oq95aWW5qyh5pWwKi9cclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkZXZpY2VJZCA9IHN0b3JlLmdldCgnZGV2aWNlX2lkJykgfHwgdGhpcy5nZXRVcmxJdGVtKCdkZXZpY2VfaWQnKTtcclxuXHJcbiAgICAgICAgaWYgKGRldmljZUlkICE9ICdudWxsJykge1xyXG4gICAgICAgICAgICB2YXIgdGltZXNEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVfaWQ6IHdpbmRvdy5DRkdbJ3RlbXBsYXRlX2lkJ10sXHJcbiAgICAgICAgICAgICAgICBhcHBfaWQ6IHN0b3JlLmdldCgnYXBwX2lkJykgfHx0aGlzLmdldFVybEl0ZW0oJ2FwcF9pZCcpLFxyXG4gICAgICAgICAgICAgICAgYWRzbG90X2lkOiBzdG9yZS5nZXQoJ2Fkc2xvdF9pZCcpIHx8dGhpcy5nZXRVcmxJdGVtKCdhZHNsb3RfaWQnKSxcclxuICAgICAgICAgICAgICAgIGRldmljZV9pZDogZGV2aWNlSWQsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICtuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3VybC9pbml0JyxcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjtcIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHRpbWVzRGF0YSksXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5saW1pdFRpbWVzID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGltaXRUaW1lcyA9IHJlc3VsdC5saW1pdFRpbWVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjY291bnRaYScpLnRleHQoX3RoaXMubGltaXRUaW1lcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2V0Q2FjaGU6ZnVuY3Rpb24oKXsgICAgLyrorr7nva7nvJPlrZgqL1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBDRkcpe1xyXG4gICAgICAgICAgICBpZiAoQ0ZHW2tleV0gPT0gJycgJiYgdGhpcy5nZXRVcmxJdGVtKGtleSkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgQ0ZHW2tleV0gPSB0aGlzLmdldFVybEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgICAgIHN0b3JlLnNldChrZXksQ0ZHW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGdldFVybEl0ZW06ZnVuY3Rpb24obmFtZSl7XHJcbiAgICAgICAgdmFywqByZWfCoD3CoG5ld8KgUmVnRXhwKFwiKF58JilcIsKgK8KgbmFtZcKgK8KgXCI9KFteJl0qKSgmfCQpXCIswqBcImlcIik7XHJcbiAgICAgICAgdmFywqBywqA9wqB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5tYXRjaChyZWcpO1xyXG4gICAgICAgIGlmwqAocsKgIT3CoG51bGwpwqByZXR1cm7CoHVuZXNjYXBlKHJbMl0pO8KgcmV0dXJuwqBudWxsO1xyXG4gICAgfSxcclxuICAgIGdldFByaXplOmZ1bmN0aW9uKCl7ICAgIC8q5oq95Lit57qi5YyF77yM6I635Y+W5aWW6aG5Ki9cclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLnJlc0RhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgdmFyIGFqYXhUaW1lb3V0VGVzdCA9ICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJy91cmwvYWR2ZXJ0JyxcclxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247XCIsXHJcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KF90aGlzLmNvbGxSZXFEYXRhKCkpLFxyXG4gICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxyXG4gICAgICAgICAgICBjb21wbGV0ZSA6IGZ1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0LHN0YXR1cyl7IC8v6K+35rGC5a6M5oiQ5ZCO5pyA57uI5omn6KGM5Y+C5pWwXHJcbiAgICAgICAgICAgICAgICBpZihzdGF0dXM9PSd0aW1lb3V0Jyl7Ly/otoXml7Ysc3RhdHVz6L+Y5pyJc3VjY2VzcyxlcnJvcuetieWAvOeahOaDheWGtVxyXG4gICAgICAgICAgICAgICAgICAgIGFqYXhUaW1lb3V0VGVzdC5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmdldFByaXplRmFpbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RoaXMucmVzRGF0YSA9IFhNTEh0dHBSZXF1ZXN0LnJlc3BvbnNlSlNPTnx8e307XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucmVzRGF0YS5lcnJvcl9jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5saW1pdFRpbWVzID0gX3RoaXMucmVzRGF0YS5saW1pdFRpbWVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZ2V0UHJpemVGYWlsOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzRGF0YVsnZXJyb3JfY29kZSddICYmIHRoaXMucmVzRGF0YVsnbGltaXRUaW1lcyddID4gMCApe1xyXG4gICAgICAgICAgICB0aGlzLmxpbWl0VGltZXMgPSB0aGlzLnJlc0RhdGFbJ2xpbWl0VGltZXMnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93Tm9SZXN1bHQoKTtcclxuICAgIH0sXHJcbiAgICBzaG93UHJpemU6ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciAkcG9wUG9zaXRpb24gPSAkKCcucG9wLXBvc2l0aW9uICcpO1xyXG5cclxuICAgICAgICB2YXIgJGNvdW50WmEgPSAkKCcjY291bnRaYScpO1xyXG4gICAgICAgIHRoaXMubGltaXRUaW1lcyA9IHRoaXMucmVzRGF0YSYmdGhpcy5yZXNEYXRhLmxpbWl0VGltZXM7XHJcbiAgICAgICAgJGNvdW50WmEudGV4dCh0aGlzLmxpbWl0VGltZXN8fDApO1xyXG5cclxuXHJcbiAgICAgICAgLy/or7fmsYLmiJDlip/vvIzlj5HpgIHmo4Dms6JcclxuICAgICAgICBpZiAoX3RoaXMucmVzRGF0YVsnYWRtcyddKSB7XHJcbiAgICAgICAgICAgIHZhciBhZE1zZyA9IF90aGlzLnJlc0RhdGFbJ2FkbXMnXVswXTtcclxuXHJcbiAgICAgICAgICAgICRwb3BQb3NpdGlvbi5maW5kKCcucHJpemVzLWltZycpLmF0dHIoJ3NyYycsYWRNc2cuaW1ndXJscyk7XHJcbiAgICAgICAgICAgICRwb3BQb3NpdGlvbi5maW5kKCcucHJpemVzLW5hbWUnKS50ZXh0KGFkTXNnLnRpdGxlKTtcclxuXHJcbiAgICAgICAgICAgIF90aGlzLnNob3dMb2coYWRNc2dbJ2ltcHRyYWNrZXJzJ10pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICQoJy5wcml6ZXMtem9vbS1ib3gsI2hkZ2dfY2xpY2tfYWRfYnRuJylcclxuICAgICAgICAgICAgICAgIC51bmJpbmQoIFwiY2xpY2tcIiApXHJcbiAgICAgICAgICAgICAgICAub24oJ2NsaWNrJyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2xpY2tMb2coYWRNc2dbJ2Nsa3RyYWNrZXJzJ10pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBhZE1zZ1snY2xrdXJsJ107IC8v6Lez6L2s6aG16Z2iXHJcbiAgICAgICAgICAgICAgICAgICAgfSw2MDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRwb3BQb3NpdGlvbi5maW5kKCcucHJpemVzLW5vLWNvbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLmZpbmQoJy5wcml6ZXMtY29udC1ib3gnKS5yZW1vdmVDbGFzcygnaGRnZ19yZXN1bHRfaGlkZV9hbmltYXRpb24nKS5hZGRDbGFzcygnaGRnZ19yZXN1bHRfc2hvd19hbmltYXRpb24nKS5zaG93KCk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLnNob3coKTtcclxuXHJcbiAgICB9LFxyXG4gICAgc2hvd05vUmVzdWx0OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyICRwb3BQb3NpdGlvbiA9ICQoJy5wb3AtcG9zaXRpb24gJyk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLmZpbmQoJy5wcml6ZXMtbm8tY29udCcpLnNob3coKTtcclxuICAgICAgICAkcG9wUG9zaXRpb24uZmluZCgnLnByaXplcy1jb250LWJveCcpLmhpZGUoKTtcclxuICAgICAgICAkKCcucHJpemVzLW5vLWNvbnQgLnByaXplcy1uby1pbWcnKS5hdHRyKCdzcmMnLCcuL2Rpc3QvaW1nL2x1Y2t5RGljZS9wcml6ZXMtcG9wLWZhaWwucG5nJyk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLnNob3coKTtcclxuICAgIH0sXHJcbiAgICBzaG93TGltaXRlZDpmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciAkcG9wUG9zaXRpb24gPSAkKCcucG9wLXBvc2l0aW9uICcpO1xyXG4gICAgICAgICRwb3BQb3NpdGlvbi5maW5kKCcucHJpemVzLW5vLWNvbnQnKS5zaG93KCk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLmZpbmQoJy5wcml6ZXMtY29udC1ib3gnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLnByaXplcy1uby1jb250IC5wcml6ZXMtbm8taW1nJykuYXR0cignc3JjJywnLi9kaXN0L2ltZy9sdWNreURpY2UvcHJpemVzLXBvcC1uby5wbmcnKTtcclxuICAgICAgICAkcG9wUG9zaXRpb24uc2hvdygpO1xyXG4gICAgfSxcclxuICAgIGhpZGVQcml6ZTpmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciAkcG9wUG9zaXRpb24gPSAkKCcucG9wLXBvc2l0aW9uICcpO1xyXG4gICAgICAgICRwb3BQb3NpdGlvbi5maW5kKCcucHJpemVzLW5vLWNvbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgJHBvcFBvc2l0aW9uLmZpbmQoJy5wcml6ZXMtY29udC1ib3gnKS5yZW1vdmVDbGFzcygnaGRnZ19yZXN1bHRfc2hvd19hbmltYXRpb24nKS5hZGRDbGFzcygnaGRnZ19yZXN1bHRfaGlkZV9hbmltYXRpb24nKTtcclxuICAgICAgICAkcG9wUG9zaXRpb24uZmFkZU91dCgpO1xyXG5cclxuICAgICAgICB0aGlzLiRzdGFydC5yZW1vdmVDbGFzcygnZW5kIGVuZDEgZW5kMiBlbmQzIGVuZDQgZW5kNSBlbmQ2JykuYWRkQ2xhc3MoJ3JlYWR5Jyk7XHJcbiAgICAgICAgdGhpcy4kZGljZS5yZW1vdmVDbGFzcygnZW5kIGVuZDEgZW5kMiBlbmQzIGVuZDQgZW5kNSBlbmQ2JykuYWRkQ2xhc3MoJ3JlYWR5Jyk7XHJcbiAgICAgICAgdGhpcy5yZVNvcnRMaXN0KCk7XHJcblxyXG4gICAgfSxcclxuICAgIHNob3dMb2c6ZnVuY3Rpb24odXJsQXJyYXkpe1xyXG4gICAgICAgIGlmICh1cmxBcnJheS5sZW5ndGggPCAxICkgcmV0dXJuO1xyXG4gICAgICAgIGZvcih2YXIgaT0wO2k8dXJsQXJyYXkubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICQoJyNjb250YW5lcicpLmFwcGVuZCgnPGltZyBjbGFzcz1cImltcHRyYWNlXCIgc3JjPVwiJysgdXJsQXJyYXlbaV0gKydcIiAvPicpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjbGlja0xvZzpmdW5jdGlvbih1cmxBcnJheSl7XHJcbiAgICAgICAgaWYgKHVybEFycmF5Lmxlbmd0aCA8IDEgKSByZXR1cm47XHJcbiAgICAgICAgZm9yKHZhciBqPTA7ajx1cmxBcnJheS5sZW5ndGg7aisrKXtcclxuICAgICAgICAgICAgJCgnI2NvbnRhbmVyJykuYXBwZW5kKCc8aW1nIGNsYXNzPVwiY2xpY2t0cmFjZVwiIHNyYz1cIicrIHVybEFycmF5W2pdICsnXCIgLz4nKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZ2V0TmV0d29yazpmdW5jdGlvbigpeyAgICAgIC8q6I635Y+W572R57uc546v5aKDKi9cclxuICAgICAgICB2YXIgdCA9IG51bGwsXHJcbiAgICAgICAgICAgIG5ldFR5cGUgPSAwXHJcbiAgICAgICAgICAgICwgZSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50XHJcbiAgICAgICAgICAgICwgbiA9IG5hdmlnYXRvci5jb25uZWN0aW9uIHx8IG5hdmlnYXRvci5tb3pDb25uZWN0aW9uIHx8IG5hdmlnYXRvci53ZWJraXRDb25uZWN0aW9uO1xyXG5cclxuICAgICAgICBpZiAoL01pY3JvTWVzc2VuZ2VyLy50ZXN0KGUpKVxyXG4gICAgICAgICAgICBpZiAoL05ldFR5cGUvLnRlc3QoZSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gZS5tYXRjaCgvTmV0VHlwZVxcLyhcXFMqKS8pO1xyXG4gICAgICAgICAgICAgICAgdCA9IGlbMV07XHJcbiAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIldlaXhpbkpTQnJpZGdlUmVhZHlcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgV2VpeGluSlNCcmlkZ2UuaW52b2tlKFwiZ2V0TmV0d29ya1R5cGVcIiwge30sIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGUuZXJyX21zZ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgZWxzZSBpZiAobikge1xyXG4gICAgICAgICAgICB2YXIgbyA9IG4udHlwZTtcclxuICAgICAgICAgICAgdCA9IG87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByID0gdGhpcy5uZXRUeXBlQXJyYXk7XHJcbiAgICAgICAgaWYgKHR5cGVvZih0KSAhPSAnc3RyaW5nJykgdCA9ICd1bmRlZmluZWQnO1xyXG4gICAgICAgIHQgPSB0LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgZm9yICh2YXIgaz0wO2s8ci5sZW5ndGg7aysrKXtcclxuICAgICAgICAgICAgaWYodC5pbmRleE9mKHJba10pID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIG5ldFR5cGUgPSBrO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldFR5cGU7XHJcbiAgICB9LFxyXG4gICAgY29sbFJlcURhdGE6ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgcmVxRGF0YSA9IHtcclxuICAgICAgICAgICAgdGVtcGxhdGVfaWQ6IHdpbmRvdy5DRkdbJ3RlbXBsYXRlX2lkJ10sXHJcbiAgICAgICAgICAgIGRldmljZV9pZDogIHN0b3JlLmdldCgnZGV2aWNlX2lkJykgfHwgdGhpcy5nZXRVcmxJdGVtKCdkZXZpY2VfaWQnKSxcclxuICAgICAgICAgICAgYXBwX2lkOiBzdG9yZS5nZXQoJ2FwcF9pZCcpIHx8dGhpcy5nZXRVcmxJdGVtKCdhcHBfaWQnKSxcclxuICAgICAgICAgICAgYWRzbG90X2lkOiBzdG9yZS5nZXQoJ2Fkc2xvdF9pZCcpIHx8dGhpcy5nZXRVcmxJdGVtKCdhZHNsb3RfaWQnKSxcclxuICAgICAgICAgICAgY29ubmVjdF90eXBlOiB0aGlzLmdldE5ldHdvcmsoKSxcclxuICAgICAgICAgICAgd2lkdGg6ICAkKHdpbmRvdykud2lkdGgoKSxcclxuICAgICAgICAgICAgaGVpZ2h0OiAkKHdpbmRvdykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogK25ldyBEYXRlKCksXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gcmVxRGF0YTtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5uZXcgTHVja3lEaWNlKCk7Il19"}